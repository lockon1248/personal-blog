---
import { Image } from "astro:assets";
import { Icon } from "astro-icon/components";
import Layout from "../layouts/Layout.astro";
import avatarImage from "../assets/avatar.webp";
import circleImage from "../assets/circle.webp";
import firstImage from "../assets/first.webp";
---

<Layout title="lockon">
  <main class="flex flex-col">
    <div class="relative">
      <div class="swiper w-full overflow-hidden">
        <div class="swiper-wrapper">
          <div class="swiper-slide">
            <Image
              class="transition-transform grayscale duration-500 h-full w-full object-cover"
              src={firstImage}
              alt="Slide"
              width={1920}
              sizes="(min-width: 1024px) 100vw, 100vw"
              fetchpriority="high"
              loading="eager"
            />
          </div>
          <div class="swiper-slide">
            <Image
              class="transition-transform grayscale duration-500 h-full w-full object-cover"
              src={firstImage}
              alt="Slide"
              width={1920}
              sizes="(min-width: 1024px) 100vw, 100vw"
              loading="lazy"
            />
          </div>
          <div class="swiper-slide">
            <Image
              class="transition-transform grayscale duration-500 h-full w-full object-cover"
              src={firstImage}
              alt="Slide"
              width={1920}
              sizes="(min-width: 1024px) 100vw, 100vw"
              loading="lazy"
            />
          </div>
        </div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next !w-auto group">
          <div
            class="h-[3px] w-[63px] bg-gold-100 transition-all duration-500 ease-in-out group-hover:w-[70px] group-hover:ml-[-7.5px]"
          >
          </div>
          <Icon class="absolute left-12 !w-3" name="allow" />
          <Icon class="absolute left-10 !w-3" name="allow" />
        </div>
        <div class="swiper-button-prev !w-auto group">
          <div
            class="h-[3px] w-[63px] bg-gold-100 transition-all duration-500 ease-in-out group-hover:w-[70px] group-hover:mr-[-7.5px]"
          >
          </div>
          <Icon class="absolute right-12 !w-3 rotate-180" name="allow" />
          <Icon class="absolute right-10 !w-3 rotate-180" name="allow" />
        </div>
      </div>
      <h2
        class="font-quattrocento text-[8vw] font-normal leading-tight text-center mb-4 text-gold-100 absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-50"
      >
        <span> Photograph </span>
        <span>What You Love</span>
      </h2>
    </div>
    <div
      class="flex items-center justify-center p-4 sm:gap-[135px] gap-[30px] flex-wrap"
    >
      <div class="flex flex-col">
        <h2 class="font-normal text-[clamp(20px,5vw,80px)]">Lockon</h2>
        <div class="flex flex-col sm:flex-row">
          <div class="flex flex-col">
            <span>LAI</span>
            <span>SHIH</span>
            <span>YUAN</span>
          </div>
          <div class="flex relative sm:w-[420px] justify-end">
            <Image
              class="absolute sm:right-[140px]"
              src={circleImage}
              alt="circle"
              width={360}
              sizes="(min-width: 1024px) 360px, 45vw"
              loading="lazy"
              decoding="async"
            />
            <Image
              src={avatarImage}
              class="w-auto h-auto object-fill"
              alt="avatar"
              width={420}
              sizes="(min-width: 768px) 420px, 70vw"
              loading="lazy"
              decoding="async"
            />
          </div>
        </div>
      </div>
      <div class="flex flex-col w-[360px]">
        <div class="flex gap-6 items-center sm:mb-[108px] mb-[30px]">
          <h1
            class="text-4xl font-black tracking-[.8rem] font-sans text-nowrap"
          >
            賴世原
          </h1>
          <span class="text-sm font-normal">Photographer</span>
        </div>
        <div class="mb-[45px]">
          <div class="border border-slate-950"></div>
        </div>
        <div>
          <p>
            這是 Lockon 的個人攝影與旅遊誌網站，透過 Astro + Tailwind
            打造。首頁有全幅輪播，作品集展示攝影作品，Journal
            記錄旅途故事，並提供社群與信箱方便聯繫。
          </p>
        </div>
      </div>
    </div>
  </main>
</Layout>

<script>
  import "swiper/css";
  import "swiper/css/navigation";
  import "swiper/css/pagination";
  import { Navigation, Pagination, Autoplay } from "swiper/modules";

  const initSwiper = async () => {
    const [{ default: Swiper }] = await Promise.all([import("swiper")]);

    const swiperConfig = {
      modules: [Navigation, Pagination, Autoplay],
      loop: true,
      pagination: {
        el: ".swiper-pagination",
        clickable: false,
      },
      autoplay: {
        delay: 2500,
      },
      speed: 1500,
      navigation: {
        nextEl: ".swiper-button-next",
        prevEl: ".swiper-button-prev",
      },
    };
    new Swiper(".swiper", swiperConfig);
  };
  const swiperEl = document.querySelector(".swiper");
  const loadSwiper = () => initSwiper().catch(() => {});
  if (swiperEl && "IntersectionObserver" in window) {
    const observer = new IntersectionObserver(
      (entries) => {
        if (entries.some((entry) => entry.isIntersecting)) {
          loadSwiper();
          observer.disconnect();
        }
      },
      { rootMargin: "200px 0px" }
    );
    observer.observe(swiperEl);
  } else {
    loadSwiper();
  }
</script>
<style is:inline>
  .swiper {
    --swiper-pagination-color: #d9bb73 !important;
    --swiper-pagination-bullet-width: 5vw; /* 调整宽度 */
    --swiper-pagination-bullet-height: 4px; /* 激活狀態的顏色 */
    --swiper-pagination-bullet-border-radius: 4px;
  }
  /* 修改分頁器的對齊方式 */
  .swiper-pagination {
    text-align: right !important;
  }
  .grayscale {
    filter: grayscale(100%);
    transition: filter 2s ease;
  }
  .swiper-slide Img:hover {
    filter: grayscale(0%);
  }
  .swiper-button-next:after {
    display: none;
  }
  .swiper-button-prev:after {
    display: none;
  }
</style>
